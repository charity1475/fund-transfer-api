apiVersion: v1
kind: ConfigMap
metadata:
  name: environment-vars-config-map
  namespace: fund-transfer
data:
  application-prep.properties: |
    spring.application.name=fund-transfer-api
    server.port=8765
    camel.servlet.mapping.context-path=/nbc-bank/devops/*
    ## Management Endpoints
    management.endpoints.web.base-path=/actuator
    management.server.port=8765
    management.endpoints.web.exposure.include=health,info
    ## FreeMarker configuration
    camel.component.freemarker.cache=true
    freemarker.error-template.uri=templates/response_template.ftl
    validation-schema.uri=schema/request-schema.json
    ## Exchange Pooling
    camel.main.exchange-factory=pooled
    camel.main.exchange-factory.pool.max-size=10000
    ## Database Configuration
    spring.datasource.url=${DB_URL}
    spring.datasource.username=${DB_USERNAME}
    spring.datasource.password=${DB_PASSWORD}
    spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver
    ## HikariCP Configuration
    spring.datasource.hikari.pool-name=FundTransferDBHikariCPSQLPool
    spring.datasource.hikari.connection-test-query=SELECT 1
    spring.datasource.hikari.minimum-idle=5
    spring.datasource.hikari.maximum-pool-size=20
    spring.datasource.hikari.idle-timeout=30000
    spring.datasource.hikari.max-lifetime=1800000
    spring.datasource.hikari.connection-timeout=30000
    spring.datasource.hikari.leak-detection-threshold=45000
    ## Logging Configuration
    logging.file.name=/var/log/fund-transfer-api/fund-transfer.log
    logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss} - %msg%n

